# MyMercariBot

一个用于监控日本Mercari商品信息的Python应用程序。

## 功能特性

- 🔍 关键词监控：支持多个关键词同时监控
- 🔔 多种通知方式：支持控制台通知和Windows系统通知
- ⚙️ 灵活配置：可调整监控间隔、查询数量等参数
- 🔗 链接跳转：支持跳转到煤炉官方链接或乐一番链接
- 💾 数据持久化：自动保存监控配置和历史数据
- 🌐 代理支持：支持HTTP/HTTPS代理，方便本地代理使用

## 新增功能

### 代理设置
现在您可以在GUI界面中配置代理地址，支持HTTP和HTTPS代理：
- **代理格式**：`http://host:port` 或 `https://host:port`
- **示例**：`http://127.0.0.1:7890`
- **使用场景**：适用于需要本地代理访问Mercari的情况
- **设置方法**：在GUI界面的"监控设置"区域找到"代理地址"输入框

### 链接跳转选择
现在您可以在GUI界面中选择商品链接的跳转目标：
- **煤炉**：跳转到 `https://jp.mercari.com/item/{商品ID}`
- **乐一番**：跳转到 `https://letaoyifan.com/goods_detail/MERCARI/{商品ID}`

设置方法：
1. 在GUI界面的"监控设置"区域找到"链接跳转"选项
2. 选择您偏好的链接类型
3. 设置会自动保存并在下次启动时生效

### 售出时间追踪
新增了 `sold_timestamp` 字段来精确记录商品的售出时间：
- 当商品状态从 `on_sale`/`ITEM_STATUS_ON_SALE` 变为 `trading`/`ITEM_STATUS_TRADING`/`sold_out` 时，自动记录售出时间
- 提供更准确的销售速度分析
- 支持售出时间统计和趋势分析

### 数据库迁移
如果您有现有的数据库，可以运行迁移脚本来添加新字段：
```bash
python -m src.db_migration
```

## 使用方法

1. 运行 `python run_app.py` 启动GUI界面
2. 添加要监控的关键词
3. 调整监控设置（间隔时间、查询数量、链接类型、代理地址等）
4. 点击"启动监控"开始监控
5. 当发现新商品时，系统会发送通知并显示相应的链接

## 代理测试

如果您想测试代理功能是否正常工作，可以运行：
```bash
python test_proxy.py
```

这个脚本会帮助您验证代理设置是否正确。